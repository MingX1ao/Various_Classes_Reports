# Homework 10

### 1 什么叫中断

**中断**：CPU不再继续做目前正在执行的指令，转移到别的指令，执行完中断可能会回来继续执行，也可能不会

**可屏蔽中断**：CPU可以不响应的中断，会被`IF=0`屏蔽

**不可屏蔽**：CPU必须响应的中断，`IF=0`也没用



### 9 8086/8088CPU如何获取中断类型号

如果是内部中断，那么内部自己产生

如果是外部中断，通过8259A芯片，经过数据总线传输到CPU，其中`D7-D3`是自己编程的，`D2D1D0`是对应的`IRi`自动产生



### 10 执行`INT 9`

`ip = 0000:[N*4], cs = 0000:[N*4+2]`，带入`N = 9`，得到`ip = [00024H], cs = [00026H]`，那么`ip = 0060H, cs = 1000H`

执行`INT 9`时，会依次`pushf`，将`TF = IF = 0`，`push cs, push ip`

那么`sp = 00FAH, ss = 0500H, ip = 0060H, flags = 0040H`

在执行`INT 9`之前，`cs = 0800H, ip = 00A2H`，那么栈顶向栈底看，三个字分别是

|  sp   | word  |
| :---: | :---: |
| 00FCH | 00A2H |
| 00FEH | 0800H |
| 0100H | 0240H |



### 11 8259A优先权管理方式和中断结束方式

* 优先权管理
  1. 固定优先级：固定`IR0-IR7`的优先级
     1. 全嵌套方式：高级中断可以嵌套在低级中断中
     2. 特殊嵌套方式：允许同级嵌套
  2. 循环优先级：圆周循环，轮流处于最高优先级
     1. 自动循环方式：当前中断结束后自动变为最低，下一级变为最高，沿用了`IR0-IR7`的优先级排序
     2. 特殊循环方式：由编程决定优先级，也会循环
* 中断结束方式
  1. 自动中断结束（AEOI）：第二个中断响应周期下降沿，ISRi置0
  2. 正常中断结束（EOI）：CPU发出EOI指令，将ISRi置0
  3. 特殊中断结束（SEOI）：CPU发送指定的ISRi置0
  4. 一般中断结束（SEOI）：8259A自动选择ISRi置0

